<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Document</title>
  </head>
  <body>
    <script>
      function newWindow(s, t) {
        let need = new Map();
        let window = new Map();
        for (let c of t) {
          need.set(c, (need.get(c) || 0) + 1);
        }
        let left = 0,
          right = 0,
          valid = 0;
        //记录最小覆盖子串的起始索引和长度
        let startIndex = 0,
          len = Infinity;
        while (right < s.length) {
          let c = s[right];
          right++;
          if (need.has(c)) {
            window.set(c, (window.get(c) || 0) + 1);
            if (window.get(c) === need.get(c)) {
              valid++;
            }
          }
          while (valid === need.size) {
            if (right - left < len) {
              startIndex = left;
              len = right - left;
            }
            let d = s[left];
            left++;
            if (need.has(d)) {
              if (window.get(d) === need.get(d)) valid--;
              window.set(d, window.get(d) - 1);
            }
          }
        }
        return len === Infinity ?
        "" : s.substr(startIndex, len);
      }
    </script>
  </body>
</html>
